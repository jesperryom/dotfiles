#!/bin/zsh

sudo yabai --load-sa

yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
yabai -m signal --add event=space_changed action="bash ~/.config/yabai/yabai-destroy_empty_spaces.sh"

yabai -m config auto_balance               on
yabai -m config layout                     bsp

yabai -m config top_padding                $WM_SPACING
yabai -m config bottom_padding             $WM_SPACING
yabai -m config left_padding               $WM_SPACING
yabai -m config right_padding              $WM_SPACING
yabai -m config window_gap                 $(( $WM_SPACING / 2 ))

yabai -m config window_placement           second_child

yabai -m config window_border              on
yabai -m config window_shadow              float

if [ "$(defaults read -g AppleInterfaceStyle)" ]; then
  yabai -m config active_window_border_color 0xFF424348
  yabai -m config normal_window_border_color 0xFF262729
else
  yabai -m config active_window_border_color 0xFFFAFAFA
  yabai -m config normal_window_border_color 0xFFA4A4B7
fi

yabai -m config window_opacity             on
yabai -m config normal_window_opacity      0.92
